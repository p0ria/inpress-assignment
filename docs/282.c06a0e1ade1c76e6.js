"use strict";(self.webpackChunkinpress_assignment=self.webpackChunkinpress_assignment||[]).push([[282],{6282:(j,m,i)=>{i.r(m),i.d(m,{WeatherModule:()=>H});var s,e,v=i(2271),y=i(2218),c=i(4006),a=i(2997);(e=s||(s={})).changeFilters=(0,a.PH)("[Weather] Change Filters",(0,a.Ky)()),e.getCityWeather=(0,a.PH)("[Weather] Get City Weather",(0,a.Ky)()),e.getCityWeatherSuccess=(0,a.PH)("[Weather] Get City Weather Success",(0,a.Ky)()),e.getCityWeatherFailure=(0,a.PH)("[Weather] Get City Weather Failure",(0,a.Ky)());const C="weather";var p,g=i(8720);!function(e){e.weatherState=(0,a.ZF)(C),e.weathers=(0,a.P1)(e.weatherState,n=>n.weathers),e.filters=(0,a.P1)(e.weatherState,n=>n.filters),e.isGetCityWeatherPending=(0,a.P1)(e.weatherState,n=>n.isGetCityWeatherPending),e.filteredWeather=(0,a.P1)(e.weathers,e.filters,(n,r)=>{const o=(0,g.EZ)(r?.cityName);return o?n[o]:null})}(p||(p={}));var P=i(590),t=i(4650),W=i(6895),M=i(3416);function F(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",7)(2,"span",8),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",9),t._uU(6),t.qZA()(),t.TgZ(7,"div",7)(8,"span",8),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"span",9)(12,"span"),t._uU(13),t.TgZ(14,"sup"),t._uU(15,"o"),t.qZA()()()(),t.TgZ(16,"div",7)(17,"span",8),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"span",9),t._uU(21),t._UZ(22,"img",10),t.qZA()(),t.TgZ(23,"div",7)(24,"span",8),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"span",9),t._uU(28),t.qZA()(),t.BQk()),2&e){const r=n.ngIf;t.xp6(3),t.Oqu(t.lcZ(4,10,"dict.region")),t.xp6(3),t.AsE(" ",r.location.country," / ",r.location.region,""),t.xp6(3),t.Oqu(t.lcZ(10,12,"dict.temperature")),t.xp6(4),t.Oqu(r.current.temperature),t.xp6(5),t.Oqu(t.lcZ(19,14,"dict.weather")),t.xp6(3),t.hij(" ",r.current.weather_descriptions[0]," "),t.xp6(1),t.Q6J("src",r.current.weather_icons[0],t.LSH),t.xp6(3),t.Oqu(t.lcZ(26,16,"dict.humidity")),t.xp6(3),t.Oqu(r.current.humidity)}}function O(e,n){1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"dict.loading"),"... "))}function A(e,n){if(1&e&&(t.YNc(0,O,3,3,"ng-container",11),t.ALo(1,"async")),2&e){const r=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,r.isGetCityWeatherPending$))}}const T=[{path:"",component:(()=>{class e{constructor(r,o){this.fb=r,this.store=o,this.form=this.fb.group({cityName:["",c.kI.required]}),this.isGetCityWeatherPending$=this.store.select(p.isGetCityWeatherPending),this.filteredWeather$=this.store.select(p.filteredWeather),this.store.pipe((0,a.Ys)(p.filters),(0,P.P)()).subscribe(u=>this.form.patchValue(u))}onSubmit(){this.form.valid&&this.store.dispatch(s.changeFilters({filters:this.form.value}))}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(c.qu),t.Y36(a.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-weather"]],decls:16,vars:12,consts:[[1,"container",3,"formGroup","ngSubmit"],[1,"search"],["formControlName","cityName","type","text","autofocus","",3,"placeholder"],["type","submit",3,"disabled"],[1,"infos"],[4,"ngIf","ngIfElse"],["empty",""],[1,"field"],[1,"key"],[1,"value"],[3,"src"],[4,"ngIf"]],template:function(r,o){if(1&r&&(t.TgZ(0,"header"),t._uU(1,"\u2601 "),t.TgZ(2,"span"),t._uU(3,"Weather App"),t.qZA()(),t.TgZ(4,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(5,"div",1),t._UZ(6,"input",2),t.ALo(7,"translate"),t.TgZ(8,"button",3),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div",4),t.YNc(12,F,29,18,"ng-container",5),t.ALo(13,"async"),t.qZA()(),t.YNc(14,A,2,3,"ng-template",null,6,t.W1O)),2&r){const u=t.MAs(15);t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("placeholder",t.lcZ(7,6,"city.name.placeholder")),t.xp6(2),t.Q6J("disabled",o.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(10,8,"dict.search")," "),t.xp6(3),t.Q6J("ngIf",t.lcZ(13,10,o.filteredWeather$))("ngIfElse",u)}},dependencies:[W.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,W.Ov,M.X$],styles:["header[_ngcontent-%COMP%]{padding:12px;font-size:24px}.container[_ngcontent-%COMP%]{max-width:700px;margin:24px auto;padding:24px;display:flex;flex-direction:column;gap:16px}.container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;gap:8px}.container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background:none;border:none;outline:none;border-bottom:1px solid white;font-size:24px;color:var(--color-text)}.container[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{margin-top:32px;display:flex;flex-direction:column;gap:16px}.container[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-height:48px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{flex:0 0 200px;font-size:20px;color:var(--color-text-2)}.container[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:28px;display:flex;align-items:center;gap:16px}"]}),e})()}];let G=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[y.Bz.forChild(T),y.Bz]}),e})();var h=i(2655),U=i(1365),w=i(9300),d=i(4004),L=i(3900),N=i(262),E=i(9646),S=i(8505),$=i(8381),J=i(529);let Y=(()=>{class e{constructor(r){this.http=r,this.baseUrl="http://api.weatherstack.com/"}getCityWeather(r){return this.http.get(`${this.baseUrl}/current`,{params:{access_key:$.V.accessKey,query:r}}).pipe((0,d.U)(o=>{if(o.error)throw Error(o.error.info,{cause:o.error});return o}))}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(J.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),I=(()=>{class e{constructor(r,o,u,K){this.actions$=r,this.store=o,this.weatherService=u,this.errorHandler=K,this.changeFilters$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(s.changeFilters),(0,U.M)(this.store.pipe((0,a.Ys)(p.weathers))),(0,w.h)(([l,f])=>{const x=f[(0,g.EZ)(l.filters?.cityName)];return!x||(0,g.iF)(x)}),(0,d.U)(([l])=>s.getCityWeather({cityName:l.filters.cityName})))),this.getCityWeather$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(s.getCityWeather),(0,L.w)(l=>this.weatherService.getCityWeather(l.cityName).pipe((0,d.U)(f=>s.getCityWeatherSuccess({cityName:l.cityName,weather:f})),(0,N.K)(f=>(0,E.of)(s.getCityWeatherFailure({error:f}))))))),this.getCityWeatherFailure$=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(s.getCityWeatherFailure),(0,S.b)(l=>{this.errorHandler.handleError(l.error)})),{dispatch:!1})}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(h.eX),t.LFG(a.yh),t.LFG(Y),t.LFG(t.qLn))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const Q=(0,a.Lq)({weathers:{},filters:{cityName:null},isGetCityWeatherPending:!1},(0,a.on)(s.changeFilters,(e,n)=>({...e,filters:{...e.filters,...n.filters}})),(0,a.on)(s.getCityWeather,(e,n)=>({...e,isGetCityWeatherPending:!0})),(0,a.on)(s.getCityWeatherSuccess,(e,n)=>({...e,weathers:{...e.weathers,[(0,g.EZ)(n.cityName)]:{...n.weather,cacheTime:Date.now()}},isGetCityWeatherPending:!1})),(0,a.on)(s.getCityWeatherFailure,(e,n)=>({...e,isGetCityWeatherPending:!1})));function z(e,n){return Q(e,n)}let H=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.m,G,a.Aw.forFeature(C,z),h.sQ.forFeature([I])]}),e})()}}]);